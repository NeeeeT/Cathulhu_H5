window.hwMiniGame=function(e,t){"use strict";class i{static isLocalNativeFile(e){for(var t=0,i=l.nativefiles.length;t<i;t++)if(-1!=e.indexOf(l.nativefiles[t]))return!0;return!1}static getFileInfo(e){var t=e,n=i.fakeObj[t];return null==n?null:n}static read(e,n="utf8",s=null,a="",o=!1,l=""){var r;r=""==a||-1==a.indexOf("http://")&&-1==a.indexOf("https://")?e:i.getFileNativePath(e),r=t.URL.getAdptedFilePath(r),i.fs.readFile({filePath:r,encoding:n,success:function(e){null!=s&&s.runWith([0,e])},fail:function(e){e&&""!=a?i.downFiles(encodeURI(a),n,s,a,o,l):null!=s&&s.runWith([1])}})}static downFiles(e,t="utf8",n=null,s="",a=!1,o="",l=!0){i.hbsdown({url:e,success:function(r){200===r.statusCode?i.readFile(r.tempFilePath,t,n,s,a,o,l):403===r.statusCode?null!=n&&n.runWith([0,e]):null!=n&&n.runWith([1,r])},fail:function(e){null!=n&&n.runWith([1,e])}}).onProgressUpdate((function(e){null!=n&&n.runWith([2,e.progress])}))}static readFile(e,n="utf8",s=null,a="",o=!1,r="",d=!0){e=t.URL.getAdptedFilePath(e),i.fs.readFile({filePath:e,encoding:n,success:function(t){(-1!=e.indexOf("http://")||-1!=e.indexOf("https://"))&&(l.autoCacheFile||o)?(null!=s&&s.runWith([0,t]),i.copyFile(e,a,null,n,d)):null!=s&&s.runWith([0,t])},fail:function(e){e&&null!=s&&s.runWith([1,e])}})}static downOtherFiles(e,t=null,n="",s=!1,a=!0){i.hbsdown({url:e,success:function(e){200===e.statusCode?(l.autoCacheFile||s)&&-1==n.indexOf("qlogo.cn")&&-1==n.indexOf(".php")?(null!=t&&t.runWith([0,e.tempFilePath]),i.copyFile(e.tempFilePath,n,null,"",a)):null!=t&&t.runWith([0,e.tempFilePath]):null!=t&&t.runWith([1,e])},fail:function(e){null!=t&&t.runWith([1,e])}})}static downLoadFile(e,n="",s=null,a="utf8"){"hbs"in window?n==t.Loader.IMAGE||n==t.Loader.SOUND?i.downOtherFiles(e,s,e,!0,!1):i.downFiles(e,a,s,e,!0,n,!1):t.Laya.loader.load(e,s)}static copyFile(e,n,s,a="",o=!0){var r=e.split("/"),d=r[r.length-1],u=n,h=i.getFileInfo(n),c=i.getFileNativePath(d);i.fakeObj[u]={md5:d,readyUrl:n,size:0,times:t.Browser.now(),encoding:a};var f=i.getCacheUseSize();h?h.readyUrl!=n?i.fs.getFileInfo({filePath:e,success:function(t){o&&f+4194304+t.size>=52428800&&(t.size>l.minClearSize&&(l.minClearSize=t.size),i.onClearCacheRes()),i.deleteFile(e,n,s,a,t.size)},fail:function(e){null!=s&&s.runWith([1,e])}}):null!=s&&s.runWith([0]):i.fs.getFileInfo({filePath:e,success:function(t){o&&f+4194304+t.size>=52428800&&(t.size>l.minClearSize&&(l.minClearSize=t.size),i.onClearCacheRes()),i.fs.copyFile({srcPath:e,destPath:c,success:function(e){i.onSaveFile(n,d,!0,a,s,t.size)},fail:function(e){null!=s&&s.runWith([1,e])}})},fail:function(e){null!=s&&s.runWith([1,e])}})}static onClearCacheRes(){var e=l.minClearSize,t=[];for(var n in i.filesListObj)"fileUsedSize"!=n&&t.push(i.filesListObj[n]);i.sortOn(t,"times",i.NUMERIC);for(var s=0,a=1,o=t.length;a<o;a++){var r=t[a];if(s>=e)break;s+=r.size,i.deleteFile("",r.readyUrl)}}static sortOn(e,t,n=0){return n==i.NUMERIC?e.sort((function(e,i){return e[t]-i[t]})):n==(i.NUMERIC|i.DESCENDING)?e.sort((function(e,i){return i[t]-e[t]})):e.sort((function(e,i){return e[t]-i[t]}))}static getFileNativePath(e){return i.fileNativeDir+"/"+e}static deleteFile(e,t="",n=null,s="",a=0){var o=i.getFileInfo(t),l=i.getFileNativePath(o.md5),r=""!=e;i.onSaveFile(t,e,r,s,n,a),i.fs.unlink({filePath:l,success:function(t){if(""!=e){var s=i.getFileNativePath(e);i.fs.copyFile({srcPath:e,destPath:s,success:function(e){},fail:function(e){null!=n&&n.runWith([1,e])}})}},fail:function(e){}})}static deleteAll(){var e=[];for(var t in i.filesListObj)"fileUsedSize"!=t&&e.push(i.filesListObj[t]);for(var n=1,s=e.length;n<s;n++){var a=e[n];i.deleteFile("",a.readyUrl)}i.filesListObj&&i.filesListObj.fileUsedSize&&(i.filesListObj.fileUsedSize=0),i.writeFilesList("",JSON.stringify({}),!1)}static onSaveFile(e,n,s=!0,a="",o=null,l=0){var r=e;if(null==i.filesListObj.fileUsedSize&&(i.filesListObj.fileUsedSize=0),s){i.getFileNativePath(n);i.filesListObj[r]={md5:n,readyUrl:e,size:l,times:t.Browser.now(),encoding:a},i.filesListObj.fileUsedSize=parseInt(i.filesListObj.fileUsedSize)+l,i.writeFilesList(r,JSON.stringify(i.filesListObj),!0),null!=o&&o.runWith([0])}else if(i.filesListObj[r]){var d=parseInt(i.filesListObj[r].size);i.filesListObj.fileUsedSize=parseInt(i.filesListObj.fileUsedSize)-d,i.filesListObj[r].md5==i.fakeObj[r].md5&&delete i.fakeObj[r],delete i.filesListObj[r],i.writeFilesList(r,JSON.stringify(i.filesListObj),!1),null!=o&&o.runWith([0])}}static writeFilesList(e,t,n){var s=i.fileNativeDir+"/"+i.fileListName;i.fs.writeFile({filePath:s,encoding:"utf8",data:t,success:function(e){},fail:function(e){}})}static getCacheUseSize(){return i.filesListObj&&i.filesListObj.fileUsedSize?i.filesListObj.fileUsedSize:0}static existDir(e,t){i.fs.mkdir({dirPath:e,success:function(e){null!=t&&t.runWith([0,{data:JSON.stringify({})}])},fail:function(e){-1!=e.errMsg.indexOf("file already exists")?i.readSync(i.fileListName,"utf8",t):null!=t&&t.runWith([1,e])}})}static readSync(e,t="utf8",n=null,s=""){var a,o=i.getFileNativePath(e);try{a=i.fs.readFileSync(o,t),null!=n&&n.runWith([0,{data:a}])}catch(e){null!=n&&n.runWith([1])}}static setNativeFileDir(e){i.fileNativeDir=l.window.hbs.env.USER_DATA_PATH+e}}i.fs=window.hbs.getFileSystemManager(),i.hbsdown=window.hbs.downloadFile,i.filesListObj={},i.fakeObj={},i.fileListName="layaairfiles.txt",i.loadPath="",i.DESCENDING=2,i.NUMERIC=16;class n extends t.SoundChannel{constructor(e,t){super(),this._audio=e,this._miniSound=t,this._onEnd=n.bindToThis(this.__onEnd,this),e.onEnded(this._onEnd)}static bindToThis(e,t){return e.bind(t)}__onEnd(){if(1==this.loops)return this.completeHandler&&(t.Laya.systemTimer.once(10,this,this.__runComplete,[this.completeHandler],!1),this.completeHandler=null),this.stop(),void this.event(t.Event.COMPLETE);this.loops>0&&this.loops--,this.startTime=0,this.play()}play(){this.isStopped=!1,t.SoundManager.addChannel(this),this._audio.play()}set startTime(e){this._audio&&(this._audio.startTime=e)}set autoplay(e){this._audio.autoplay=e}get autoplay(){return this._audio.autoplay}get position(){return this._audio?this._audio.currentTime:0}get duration(){return this._audio?this._audio.duration:0}stop(){this.isStopped=!0,t.SoundManager.removeChannel(this),this.completeHandler=null,this._audio&&(this._audio.stop(),this.loop||(this._audio.offEnded(null),this._miniSound.dispose(),this._audio=null,this._miniSound=null,this._onEnd=null))}pause(){this.isStopped=!0,this._audio.pause()}get loop(){return this._audio.loop}set loop(e){this._audio.loop=e}resume(){this._audio&&(this.isStopped=!1,t.SoundManager.addChannel(this),this._audio.play())}set volume(e){this._audio&&(this._audio.volume=e)}get volume(){return this._audio?this._audio.volume:1}}class s extends t.EventDispatcher{constructor(){super(),this.loaded=!1}static _createSound(){return s._id++,l.window.hbs.createInnerAudioContext()}load(e){if(s._musicAudio||(s._musicAudio=s._createSound()),i.isLocalNativeFile(e)){if(-1!=e.indexOf("http://")||-1!=e.indexOf("https://"))if(""!=i.loadPath)e=e.split(i.loadPath)[1];else{var n=""!=t.URL.rootPath?t.URL.rootPath:t.URL._basePath;""!=n&&(e=e.split(n)[1])}}else e=t.URL.formatURL(e);if(this.url=e,this.readyUrl=e,s._audioCache[this.readyUrl])this.event(t.Event.COMPLETE);else if(l.autoCacheFile&&i.getFileInfo(e))this.onDownLoadCallBack(e,0);else if(l.autoCacheFile)if(i.isLocalNativeFile(e)){var a=e;if(""!=(n=""!=t.URL.rootPath?t.URL.rootPath:t.URL._basePath)&&(e=e.split(n)[1]),e||(e=a),l.subNativeFiles&&0==l.subNativeheads.length)for(var o in l.subNativeFiles){var r=l.subNativeFiles[o];l.subNativeheads=l.subNativeheads.concat(r);for(var d=0;d<r.length;d++)l.subMaps[r[d]]=o+"/"+r[d]}if(l.subNativeFiles&&-1!=e.indexOf("/")){var u=e.split("/")[0]+"/";if(u&&-1!=l.subNativeheads.indexOf(u)){var h=l.subMaps[u];e=e.replace(u,h)}}this.onDownLoadCallBack(e,0)}else!i.isLocalNativeFile(e)&&-1==e.indexOf("http://")&&-1==e.indexOf("https://")||-1!=e.indexOf("http://usr/")?this.onDownLoadCallBack(e,0):i.downOtherFiles(encodeURI(e),t.Handler.create(this,this.onDownLoadCallBack,[e]),e);else this.onDownLoadCallBack(e,0)}onDownLoadCallBack(e,n,a=null){if(n)this.event(t.Event.ERROR);else{var o;if(l.autoCacheFile){if(a)o=a;else if(i.isLocalNativeFile(e)){var r=""!=t.URL.rootPath?t.URL.rootPath:t.URL._basePath,d=e;""==r||-1==e.indexOf("http://")&&-1==e.indexOf("https://")||(o=e.split(r)[1]),o||(o=d)}else{var u=i.getFileInfo(e);if(u&&u.md5){var h=u.md5;o=i.getFileNativePath(h)}else o=e}this.url!=t.SoundManager._bgMusic?(this._sound=s._createSound(),this._sound.src=this.url=o):(this._sound=s._musicAudio,this._sound.src=this.url=o)}else this.url!=t.SoundManager._bgMusic?(this._sound=s._createSound(),this._sound.src=e):(this._sound=s._musicAudio,this._sound.src=e);this._sound.onCanplay(s.bindToThis(this.onCanPlay,this)),this._sound.onError(s.bindToThis(this.onError,this))}}onError(e){try{console.log("-----1---------------minisound-----id:"+s._id),console.log(e)}catch(e){console.log("-----2---------------minisound-----id:"+s._id),console.log(e)}this.event(t.Event.ERROR),this._sound.offError(null)}onCanPlay(){this.loaded=!0,this.event(t.Event.COMPLETE),this._sound.offCanplay(null)}static bindToThis(e,t){return e.bind(t)}play(e=0,a=0){var o;if(this.url==t.SoundManager._bgMusic?(s._musicAudio||(s._musicAudio=s._createSound()),o=s._musicAudio):o=s._audioCache[this.readyUrl]?s._audioCache[this.readyUrl]._sound:s._createSound(),!o)return null;if(l.autoCacheFile&&i.getFileInfo(this.url)){var r=i.getFileInfo(this.url).md5;o.src=this.url=i.getFileNativePath(r)}else o.src=this.url;var d=new n(o,this);return d.url=this.url,d.loops=a,d.loop=0===a,d.startTime=e,d.play(),t.SoundManager.addChannel(d),d}get duration(){return this._sound.duration}dispose(){var e=s._audioCache[this.readyUrl];e&&(e.src="",e._sound&&(e._sound.destroy(),e._sound=null,e=null),delete s._audioCache[this.readyUrl]),this._sound&&(this._sound.destroy(),this._sound=null,this.readyUrl=this.url=null)}}s._id=0,s._audioCache={};class a{constructor(){}static _createInputElement(){t.Input._initInput(t.Input.area=t.Browser.createElement("textarea")),t.Input._initInput(t.Input.input=t.Browser.createElement("input")),t.Input.inputContainer=t.Browser.createElement("div"),t.Input.inputContainer.style.position="absolute",t.Input.inputContainer.style.zIndex=1e5,t.Browser.container.appendChild(t.Input.inputContainer),t.Laya.stage.on("resize",null,a._onStageResize),l.window.hbs.onWindowResize&&l.window.hbs.onWindowResize((function(e){})),t.SoundManager._soundClass=s,t.SoundManager._musicClass=s;var e=l.systemInfo.model,i=l.systemInfo.system;-1!=e.indexOf("iPhone")&&(t.Browser.onIPhone=!0,t.Browser.onIOS=!0,t.Browser.onIPad=!0,t.Browser.onAndroid=!1),-1==i.indexOf("Android")&&-1==i.indexOf("Adr")||(t.Browser.onAndroid=!0,t.Browser.onIPhone=!1,t.Browser.onIOS=!1,t.Browser.onIPad=!1)}static _onStageResize(){t.Laya.stage._canvasTransform.identity().scale(t.Browser.width/t.Render.canvas.width/t.Browser.pixelRatio,t.Browser.height/t.Render.canvas.height/t.Browser.pixelRatio)}static inputFocus(e){var i=t.Input.inputElement.target;i&&!i.editable||(l.window.hbs.offKeyboardConfirm(),l.window.hbs.offKeyboardInput(),l.window.hbs.showKeyboard({defaultValue:i.text,maxLength:i.maxChars,multiple:i.multiline,confirmHold:!0,confirmType:i.confirmType||"done",success:function(e){},fail:function(e){}}),l.window.hbs.onKeyboardConfirm((function(e){var n=e?e.value:"";i._restrictPattern&&(n=n.replace(/\u2006|\x27/g,""),i._restrictPattern.test(n)&&(n=n.replace(i._restrictPattern,""))),i.text=n,i.event(t.Event.INPUT),a.inputEnter(),i.event("confirm")})),l.window.hbs.onKeyboardInput((function(e){var n=e?e.value:"";i.multiline||-1==n.indexOf("\n")?(i._restrictPattern&&(n=n.replace(/\u2006|\x27/g,""),i._restrictPattern.test(n)&&(n=n.replace(i._restrictPattern,""))),i.text=n,i.event(t.Event.INPUT)):a.inputEnter()})))}static inputEnter(){t.Input.inputElement.target.focus=!1}static inputblur(){a.hideKeyboard()}static hideKeyboard(){l.window.hbs.offKeyboardConfirm(),l.window.hbs.offKeyboardInput(),l.window.hbs.hideKeyboard({success:function(e){console.log("隐藏键盘")},fail:function(e){console.log("隐藏键盘出错:"+(e?e.errMsg:""))}})}}class o extends t.EventDispatcher{constructor(){super()}_loadResourceFilter(e,n){if(this.sourceUrl=t.URL.formatURL(n),-1==n.indexOf(l.window.hbs.env.USER_DATA_PATH)&&(-1!=n.indexOf("http://")||-1!=n.indexOf("https://")))if(""!=i.loadPath)n=n.split(i.loadPath)[1];else{var s=""!=t.URL.rootPath?t.URL.rootPath:t.URL._basePath,a=n;""!=s&&(n=n.split(s)[1]),n||(n=a)}if(l.subNativeFiles&&0==l.subNativeheads.length)for(var r in l.subNativeFiles){var d=l.subNativeFiles[r];l.subNativeheads=l.subNativeheads.concat(d);for(var u=0;u<d.length;u++)l.subMaps[d[u]]=r+"/"+d[u]}if(l.subNativeFiles&&-1!=n.indexOf("/")){var h=n.split("/")[0]+"/";if(h&&-1!=l.subNativeheads.indexOf(h)){var c=l.subMaps[h];n=n.replace(h,c)}}switch(e){case t.Loader.IMAGE:case"htmlimage":case"nativeimage":o._transformImgUrl(n,e,this);break;case t.Loader.SOUND:this._loadSound(n);break;default:this._loadResource(e,n)}}_loadSound(e){var n;if(i.isLocalNativeFile(e)){var s=""!=t.URL.rootPath?t.URL.rootPath:t.URL._basePath,a=e;""==s||-1==e.indexOf("http://")&&-1==e.indexOf("https://")||(n=e.split(s)[1]),n||(n=a),o.onDownLoadCallBack(e,this,0)}else{var r=t.URL.formatURL(e);!i.isLocalNativeFile(e)&&-1==r.indexOf("http://")&&-1==r.indexOf("https://")||-1!=r.indexOf(l.window.hbs.env.USER_DATA_PATH)?o.onDownLoadCallBack(e,this,0):i.downOtherFiles(encodeURI(r),t.Handler.create(o,o.onDownLoadCallBack,[r,this]),r)}}static onDownLoadCallBack(e,n,s,a=null){if(s)n.event(t.Event.ERROR,"Load sound failed");else{var o;if(l.autoCacheFile)if(a)o=a;else if(i.isLocalNativeFile(e)){var r=""!=t.URL.rootPath?t.URL.rootPath:t.URL._basePath,d=e;""==r||-1==e.indexOf("http://")&&-1==e.indexOf("https://")||(o=e.split(r)[1]),o||(o=d)}else{var u=i.getFileInfo(e);if(u&&u.md5){var h=u.md5;o=i.getFileNativePath(h)}else o=e}e=o;var c=new t.SoundManager._soundClass;c.load(e),n.onLoaded(c)}}static bindToThis(e,t){return e.bind(t)}complete(e){e instanceof t.Resource?e._setCreateURL(this.sourceUrl):e instanceof t.Texture&&e.bitmap instanceof t.Resource&&e.bitmap._setCreateURL(this.sourceUrl),this.originComplete(e)}_loadHttpRequestWhat(e,n){var s=l.getUrlEncode(e,n);if(t.Loader.preLoadedMap[e])this.onLoaded(t.Loader.preLoadedMap[e]);else{var a=t.URL.formatURL(e);if(i.isLocalNativeFile(e)||i.getFileInfo(a)||-1!=e.indexOf(l.window.hbs.env.USER_DATA_PATH)||-1==a.indexOf("http://")&&-1==a.indexOf("https://")||l.AutoCacheDownFile){var r=i.getFileInfo(t.URL.formatURL(e));r?(r.encoding=null==r.encoding?"utf8":r.encoding,i.readFile(i.getFileNativePath(r.md5),s,new t.Handler(o,o.onReadNativeCallBack,[e,n,this]),e)):"image"==this.type||"htmlimage"==this.type?this._transformImgUrl(e,n):n!=t.Loader.IMAGE&&(-1==a.indexOf("http://")&&-1==a.indexOf("https://")||i.isLocalNativeFile(e))?i.readFile(e,s,new t.Handler(o,o.onReadNativeCallBack,[e,n,this]),e):i.downFiles(encodeURI(a),s,new t.Handler(o,o.onReadNativeCallBack,[e,n,this]),a,!0)}else this._loadHttpRequest(a,n,this,this.onLoaded,this,this.onProgress,this,this.onError)}}static onReadNativeCallBack(e,i=null,n=null,s=0,a=null){var o;s?1==s&&n._loadHttpRequest(e,i,n,n.onLoaded,n,n.onProgress,n,n.onError):(o=i==t.Loader.JSON||i==t.Loader.ATLAS||i==t.Loader.PREFAB||i==t.Loader.PLF?l.getJson(a.data):i==t.Loader.XML?t.Utils.parseXMLFromString(a.data):a.data,n.onLoaded(o))}static _transformImgUrl(e,n,s){if(i.isLocalNativeFile(e))s._loadImage(e,!1);else if(l.autoCacheFile)if(i.isLocalNativeFile(e)||i.getFileInfo(t.URL.formatURL(e)))o.onCreateImage(e,s);else{var a=t.URL.formatURL(e);-1!=e.indexOf(l.window.hbs.env.USER_DATA_PATH)||-1==a.indexOf("http://")&&-1==a.indexOf("https://")?s._loadImage(e):i.downOtherFiles(encodeURI(a),new t.Handler(o,o.onDownImgCallBack,[e,s]),a)}else s._loadImage(encodeURI(e))}static onDownImgCallBack(e,t,i,n=""){i?t.onError(null):o.onCreateImage(e,t,!1,n)}static onCreateImage(e,n,s=!1,a=""){var o;if(l.autoCacheFile)if(s)o=e;else if(""!=a)o=a;else{var r=i.getFileInfo(t.URL.formatURL(e)).md5;o=i.getFileNativePath(r)}else o=s?e:a;n._loadImage(o,!1)}}class l{static getJson(e){return JSON.parse(e)}static enable(){l.init()}static init(){l._inited||(l._inited=!0,l.window=window,l.window.hasOwnProperty("hbs")&&(l.EnvConfig={},i.setNativeFileDir("/layaairGame"),i.existDir(i.fileNativeDir,t.Handler.create(l,l.onMkdirCallBack)),l.systemInfo=l.window.hbs.getSystemInfoSync(),l.window.focus=function(){},t.Laya._getUrlPath=function(){return""},l.window.logtime=function(e){},l.window.alertTimeLog=function(e){},l.window.resetShareInfo=function(){},l.EnvConfig.pixelRatioInt=0,t.Browser._pixelRatio=l.pixelRatio(),l._preCreateElement=t.Browser.createElement,t.Browser.createElement=l.createElement,t.RunDriver.createShaderCondition=l.createShaderCondition,t.Input._createInputElement=a._createInputElement,t.Loader.prototype._loadResourceFilter=o.prototype._loadResourceFilter,t.Loader.prototype._loadSound=o.prototype._loadSound,t.Loader.prototype.originComplete=t.Loader.prototype.complete,t.Loader.prototype.complete=o.prototype.complete,t.Loader.prototype._loadHttpRequestWhat=o.prototype._loadHttpRequestWhat,t.Config.useRetinalCanvas=!0))}static getUrlEncode(e,t){return"arraybuffer"==t?"binary":"utf8"}static downLoadFile(e,t="",n=null,s="utf8"){i.getFileInfo(e)?null!=n&&n.runWith([0]):i.downLoadFile(e,t,n,s)}static remove(e,t=null){i.deleteFile("",e,t,"",0)}static removeAll(){i.deleteAll()}static hasNativeFile(e){return i.isLocalNativeFile(e)}static getFileInfo(e){return i.getFileInfo(e)}static getFileList(){return i.filesListObj}static exitMiniProgram(){l.window.hbs.exitMiniProgram()}static onMkdirCallBack(e,t){e?(i.fakeObj={},i.filesListObj={}):(i.filesListObj=JSON.parse(t.data)||{},i.fakeObj=JSON.parse(t.data)||{}),i.fs.readdir({dirPath:i.fileNativeDir,success:function(e){var t={};for(let e in i.filesListObj)"fileUsedSize"!=e&&(t[i.filesListObj[e].md5]=!0);var n,s=e.files;for(let e=0,o=s.length;e<o;e++)if((n=s[e])!=i.fileListName){var a=i.getFileNativePath(n);t[a]||t[n]||i.fs.unlink({filePath:a,success:function(e){console.log("删除无引用的磁盘文件:"+n)}})}}})}static pixelRatio(){if(!l.EnvConfig.pixelRatioInt)try{return l.EnvConfig.pixelRatioInt=l.systemInfo.pixelRatio,l.systemInfo.pixelRatio}catch(e){}return l.EnvConfig.pixelRatioInt}static createElement(e){if("textarea"==e||"input"==e)return l.onCreateInput(e);if("div"==e){var t=l._preCreateElement(e);return t.contains=function(e){return null},t.removeChild=function(e){},t}return l._preCreateElement(e)}static onCreateInput(e){var t=l._preCreateElement(e);return t.focus=a.inputFocus,t.blur=a.inputblur,t.style={},t.value=0,t.parentElement={},t.placeholder={},t.type={},t.setColor=function(e){},t.setType=function(e){},t.setFontFace=function(e){},t.addEventListener=function(e){},t.contains=function(e){return null},t.removeChild=function(e){},t}static createShaderCondition(e){return function(){return this[e.replace("this.","")]}}}l._inited=!1,l.autoCacheFile=!0,l.minClearSize=5242880,l.nativefiles=["layaNativeDir","wxlocal"],l.subNativeFiles=[],l.subNativeheads=[],l.subMaps=[],l.AutoCacheDownFile=!1;class r extends t.EventDispatcher{constructor(){super()}static __init__(){try{var e;if(!(e=t.Accelerator))return;e.prototype.on=r.prototype.on,e.prototype.off=r.prototype.off}catch(e){}}static startListen(e){if(r._callBack=e,!r._isListening){r._isListening=!0;try{l.window.hbs.onAccelerometerChange(r.onAccelerometerChange)}catch(e){}}}static stopListen(){r._isListening=!1;try{l.window.hbs.stopAccelerometer({})}catch(e){}}static onAccelerometerChange(e){var t;(t={}).acceleration=e,t.accelerationIncludingGravity=e,t.rotationRate={},null!=r._callBack&&r._callBack(t)}on(e,t,i,n=null){return super.on(e,t,i,n),r.startListen(this.onDeviceOrientationChange),this}off(e,t,i,n=!1){return this.hasListener(e)||r.stopListen(),super.off(e,t,i,n)}}r._isListening=!1;class d{constructor(){}static __init__(){l.window.navigator.geolocation.getCurrentPosition=d.getCurrentPosition,l.window.navigator.geolocation.watchPosition=d.watchPosition,l.window.navigator.geolocation.clearWatch=d.clearWatch}static getCurrentPosition(e=null,t=null,i=null){var n;(n={}).success=function(t){null!=e&&e(t)},n.fail=t,l.window.hbs.getLocation(n)}static watchPosition(e=null,i=null,n=null){var s;return d._curID++,(s={}).success=e,s.error=i,d._watchDic[d._curID]=s,t.Laya.systemTimer.loop(1e3,null,d._myLoop),d._curID}static clearWatch(e){delete d._watchDic[e],d._hasWatch()||t.Laya.systemTimer.clear(null,d._myLoop)}static _hasWatch(){var e;for(e in d._watchDic)if(d._watchDic[e])return!0;return!1}static _myLoop(){d.getCurrentPosition(d._mySuccess,d._myError)}static _mySuccess(e){var i,n={};for(i in n.coords=e,n.timestamp=t.Browser.now(),d._watchDic)d._watchDic[i].success&&d._watchDic[i].success(n)}static _myError(e){var t;for(t in d._watchDic)d._watchDic[t].error&&d._watchDic[t].error(e)}}d._watchDic={},d._curID=0;e.HWMiniAdapter=l,e.MiniAccelerator=r,e.MiniFileMgr=i,e.MiniInput=a,e.MiniLoader=o,e.MiniLocation=d,e.MiniSound=s,e.MiniSoundChannel=n,e.MiniVideo=class{constructor(e=320,t=240){this.videoend=!1,this.videourl="",this.videoElement=l.window.hbs.createVideo({width:e,height:t,autoplay:!0})}static __init__(){}on(e,t,i){"loadedmetadata"==e?(this.onPlayFunc=i.bind(t),this.videoElement.onPlay=this.onPlayFunction.bind(this)):"ended"==e&&(this.onEndedFunC=i.bind(t),this.videoElement.onEnded=this.onEndedFunction.bind(this)),this.videoElement.onTimeUpdate=this.onTimeUpdateFunc.bind(this)}onTimeUpdateFunc(e){this.position=e.position,this._duration=e.duration}get duration(){return this._duration}onPlayFunction(){this.videoElement&&(this.videoElement.readyState=200),console.log("=====视频加载完成========"),null!=this.onPlayFunc&&this.onPlayFunc()}onEndedFunction(){this.videoElement&&(this.videoend=!0,console.log("=====视频播放完毕========"),null!=this.onEndedFunC&&this.onEndedFunC())}off(e,t,i){"loadedmetadata"==e?(this.onPlayFunc=i.bind(t),this.videoElement.offPlay=this.onPlayFunction.bind(this)):"ended"==e&&(this.onEndedFunC=i.bind(t),this.videoElement.offEnded=this.onEndedFunction.bind(this))}load(e){this.videoElement&&(this.videoElement.src=e)}play(){this.videoElement&&(this.videoend=!1,this.videoElement.play())}pause(){this.videoElement&&(this.videoend=!0,this.videoElement.pause())}get currentTime(){return this.videoElement?this.videoElement.initialTime:0}set currentTime(e){this.videoElement&&(this.videoElement.initialTime=e)}get videoWidth(){return this.videoElement?this.videoElement.width:0}get videoHeight(){return this.videoElement?this.videoElement.height:0}get ended(){return this.videoend}get loop(){return!!this.videoElement&&this.videoElement.loop}set loop(e){this.videoElement&&(this.videoElement.loop=e)}get playbackRate(){return this.videoElement?this.videoElement.playbackRate:0}set playbackRate(e){this.videoElement&&(this.videoElement.playbackRate=e)}get muted(){return!!this.videoElement&&this.videoElement.muted}set muted(e){this.videoElement&&(this.videoElement.muted=e)}get paused(){return!!this.videoElement&&this.videoElement.paused}size(e,t){this.videoElement&&(this.videoElement.width=e,this.videoElement.height=t)}get x(){return this.videoElement?this.videoElement.x:0}set x(e){this.videoElement&&(this.videoElement.x=e)}get y(){return this.videoElement?this.videoElement.y:0}set y(e){this.videoElement&&(this.videoElement.y=e)}get currentSrc(){return this.videoElement.src}destroy(){this.videoElement&&this.videoElement.destroy(),this.videoElement=null,this.onEndedFunC=null,this.onPlayFunc=null,this.videoend=!1,this.videourl=null}reload(){this.videoElement&&(this.videoElement.src=this.videourl)}}};